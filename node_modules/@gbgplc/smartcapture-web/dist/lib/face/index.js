import{__classPrivateFieldGet as e,__classPrivateFieldSet as t,__decorate as i}from"tslib";import{css as o,LitElement as a,html as n}from"lit";import{property as s,state as r,customElement as l}from"lit/decorators.js";import{createRef as d,ref as c}from"lit/directives/ref.js";import"piexifjs";import h from"@gbgplc/stickman-wasm";const v=e=>({code:1,message:e}),u=e=>({code:2,message:`Unexpected error: ${e}`}),p=()=>"mediaDevices"in navigator||(console.error("Camera not available"),!1),m=e=>new Promise((t=>{const i=document.createElement("img");i.onload=()=>{const e=(e=>{const t=document.createElement("canvas");let i=1080,o=720;const{width:a,height:n}=e,s=t.getContext("2d");(a>n?n:a)>o?a<n?(i=o,o=i*(n/a)):i=o*(a/n):(i=e.width,o=e.height);t.width=i,t.height=o,null==s||s.drawImage(e,0,0,i,o);const r=t.toDataURL("image/jpeg",.8);return null==s||s.clearRect(0,0,i,o),r})(i);URL.revokeObjectURL(i.src),t(e)},i.src=URL.createObjectURL(e)}));var w,g;!function(e){e[e.ID1=0]="ID1",e[e.ID2=1]="ID2",e[e.ID3=2]="ID3",e[e.OTHER=3]="OTHER",e[e.NONE=4]="NONE"}(w||(w={})),function(e){e[e.SMALL_DOCUMENT=0]="SMALL_DOCUMENT",e[e.OUT_OF_FRAME_DOCUMENT=1]="OUT_OF_FRAME_DOCUMENT",e[e.GOOD_DOCUMENT=2]="GOOD_DOCUMENT"}(g||(g={}));var b,C,f,E=new class{constructor(){this.createWorker=e=>new Promise(((t,i)=>(this.smartCaptureWorker||(this.smartCaptureWorker=this.createCrossDomainWorker(e)),this.makeRequest("Initialise",null).then(t).catch(i)))),this.checkImage=e=>this.makeRequest("PerformQualityCheck",{image:e}),this.makeRequest=(e,t,i=(new Date).getTime().toString())=>new Promise(((o,a)=>{if(this.smartCaptureWorker){const n=({data:e})=>e.id===i?(this.smartCaptureWorker.removeEventListener("message",n),this.smartCaptureWorker.removeEventListener("error",s),"Error"===e.message?a():o(e.data)):a(),s=e=>(this.smartCaptureWorker.removeEventListener("message",n),this.smartCaptureWorker.removeEventListener("error",s),a(e));this.smartCaptureWorker.addEventListener("message",n),this.smartCaptureWorker.addEventListener("error",s),this.smartCaptureWorker.postMessage({id:i,message:e,data:t})}else a()}))}createCrossDomainWorker(e){let t;try{this.testSameOrigin(e)?(t=new Worker(e,{type:"module"}),t.onerror=i=>{i.preventDefault(),t=this.createWorkerFallback(e)}):t=this.createWorkerFallback(e)}catch(i){t=this.createWorkerFallback(e)}return t}createWorkerFallback(e){try{let t;try{t=new Blob([`importScripts('${e}');`],{type:"module"})}catch(i){const o=new(window&&window.BlobBuilder||window&&window.WebKitBlobBuilder||window&&window.MozBlobBuilder);o.append(`importScripts('${e}');`),t=o.getBlob("module")}const i=(window&&window.URL||window&&window.webkitURL).createObjectURL(t);return new Worker(i)}catch(e){console.log("WorkerFallback",e)}}testSameOrigin(e){const t=window.location,i=document.createElement("a");return i.href=e,i.hostname===t.hostname&&i.port===t.port&&i.protocol===t.protocol}};class y{constructor(){this._initialized=!1,this._initializing=!1,this.barcodeReaderId="barcode-reader",this.hiddenCanvas=document.createElement("canvas"),this.init=async()=>{if(this._initialized)return!0;if(this._initializing)return!1;{this._initializing=!0;const e=new URL(__WORKER_PATH__,import.meta.url).href;try{return await E.createWorker(e),this._initializing=!1,this._initialized=!0,!0}catch(e){throw this._initializing=!1,this._initialized=!1,new Error("Create Worker Failed")}}},this.addBarcodeReaderDiv=e=>{if(document.getElementById(e))return;const t=document.createElement("div");t.id=e,t.style.display="none",document.body.appendChild(t)},this.processEncodedFrame=async e=>{const t=await E.checkImage(e);if(t&&t.quality&&t.coords){const e=t.quality.coordinateCheck?this.mapCorners(t.coords):void 0,i={width:t.coords.width,height:t.coords.height};return{isGood:t.isGood,dimensions:i,isAdequateDpi:t.quality.resolutionCheck,corners:e,isSharp:t.quality.blurCheck,isGlareFree:t.quality.glareCheck,failedChecks:t.failedChecks}}throw new Error("Part of result was null")},this.imageDataToBlob=async e=>{const t=e.width,i=e.height,{hiddenCanvas:o}=this,a=this.hiddenCanvas.getContext("2d");if(!a)throw new Error("Hidden Context Missing");o.width=t,o.height=i,a.putImageData(e,0,0);const n=await new Promise((e=>o.toBlob(e)));if(n)return n;throw new Error("Canvas To Blob Errored")},this.detect=async e=>{if(e.imageData){const t=await this.imageDataToBlob(e.imageData),i=await t.arrayBuffer(),o=await this.processEncodedFrame(i);if(o.isGood){const e=await this.crop(i,o);return o.image=e,o}return o}throw new Error("Image Data Was Null")},this.crop=async(e,t)=>{var i,o;if(!e||!t.corners)throw new Error("Image or Corners Missing");const{hiddenCanvas:a}=this,n=this.hiddenCanvas.getContext("2d");if(!n)throw new Error("Hidden Context Missing");if((null===(i=t.dimensions)||void 0===i?void 0:i.width)&&(null===(o=t.dimensions)||void 0===o?void 0:o.height)){const i=new Blob([e],{type:"image/jpeg"}),o=new Image;return(e=>new Promise(((i,s)=>{o.onload=function(){if(t.corners){const e=Math.min(t.corners.topLeft.y,t.corners.topRight.y),s=Math.max(t.corners.bottomLeft.y,t.corners.bottomRight.y),r=Math.min(t.corners.topLeft.x,t.corners.bottomLeft.x),l=Math.max(t.corners.topRight.x,t.corners.bottomRight.x);a.height=s-e,a.width=l-r,n.drawImage(o,r,e,l-r,s-e,0,0,a.width,a.height);const d=n.getImageData(0,0,a.width,a.height);n.clearRect(0,0,a.width,a.height),a.height=1,a.width=1,i(d)}},o.onerror=s,o.src=e})))(URL.createObjectURL(i))}throw new Error("Width or Height Missing")},this.addBarcodeReaderDiv(this.barcodeReaderId)}get isInitialized(){return this._initialized}get isInitializing(){return this._initializing}mapCorners(e){return{topLeft:{x:e.x,y:e.y},topRight:{x:e.x+e.width,y:e.y},bottomRight:{x:e.x+e.width,y:e.y+e.height},bottomLeft:{x:e.x,y:e.y+e.height}}}}b=y,C={value:void 0},y.getInstance=()=>(e(b,b,"f",C)||t(b,b,new b,"f",C),e(b,b,"f",C));new class{constructor(e){this.postMessage=(e,t,i)=>new Promise((o=>o(this.workerGlobalContext.postMessage({id:e,message:t,data:i})))),this.onError=e=>this.postMessage("","Error",{...e}),this.onMessage=({data:e})=>{switch(e.message){case"PerformQualityCheck":return this.onPerformQualityCheck(e.id,e.data);case"Terminate":return this.postMessage(e.id,"Terminate").then((()=>this.workerGlobalContext.close()));case"Initialise":return this.onInitialize().then((()=>this.postMessage(e.id,"ReadyToProcess"))).catch((()=>this.postMessage(e.id,"Error")))}},this.onInitialize=()=>new Promise((e=>this.smartCapture?e(this.smartCapture):h().then((t=>(this.smartCapture=t,e(t)))))),this.onPerformQualityCheck=(e,{image:t})=>{this.checkQuality(t).then((t=>this.postMessage(e,"CheckComplete",t))).catch((t=>this.postMessage(e,"CheckFailed",t.message)))},this.resolveCheck=(e,t,i)=>{const o=t.includes(e),a=i.includes(e);return o||a?o:null},this.checkQuality=e=>{const t=this.smartCapture.analyse_encoded_image(e),{document_bounds:i,failed_checks:o,is_good:a,successful_checks:n}=JSON.parse(t);return Promise.resolve({isGood:a,quality:{blurCheck:this.resolveCheck("BlurCheck",n,o),glareCheck:this.resolveCheck("GlareCheck",n,o),resolutionCheck:this.resolveCheck("LowResolutionCheck",n,o),coordinateCheck:this.resolveCheck("FullDocumentInViewCheck",n,o)},failedChecks:o,coords:i})},this.workerGlobalContext=e,this.workerGlobalContext.addEventListener("message",this.onMessage),this.workerGlobalContext.addEventListener("error",this.onError)}}(self);class k{constructor(e){this.parent=e}dispatchInitialized(){const e=new CustomEvent(k.InitializeEventName,{bubbles:!0,composed:!0}),t=new CustomEvent(k.DetectorInitializeEventName,{bubbles:!0,composed:!0});this.parent.dispatchEvent(e),console.warn("DetectorInitializeEventName is deprecated.  Use 'InitializeEventName' instead."),this.parent.dispatchEvent(t)}dispatchBeforeOpened(){const e=new CustomEvent(k.BeforeOpenEventName,{bubbles:!0,composed:!0});this.parent.dispatchEvent(e)}dispatchOpened(){const e=new CustomEvent(k.OpenEventName,{bubbles:!0,composed:!0});this.parent.dispatchEvent(e)}dispatchDetected(e){const t=new CustomEvent(k.DetectEventName,{bubbles:!0,composed:!0,detail:{errors:e}});this.parent.dispatchEvent(t)}dispatchBeforeCaptured(){const e=new CustomEvent(k.BeforeCaptureEventName,{bubbles:!0,composed:!0});this.parent.dispatchEvent(e)}dispatchCapture(e,t){e||this.dispatchError(u("Capture called with missing result image"));const i=new CustomEvent(k.CaptureEventName,{bubbles:!0,composed:!0,detail:{imageBase64:e,encryptedFile:t}});this.parent.dispatchEvent(i)}dispatchClosed(){const e=new CustomEvent(k.CloseEventName,{bubbles:!0,composed:!0});this.parent.dispatchEvent(e)}dispatchError(e){const t=new CustomEvent(k.FailureEventName,{bubbles:!0,composed:!0,detail:{error:e}});this.parent.dispatchEvent(t)}dispatchRetake(){const e=new CustomEvent(k.RetakeEventName,{bubbles:!0,composed:!0});console.warn("RetakeEventName is deprecated and will be removed in a future release"),this.parent.dispatchEvent(e)}dispatchPreview(){const e=new CustomEvent(k.PreviewEventName,{bubbles:!0,composed:!0});console.warn("PreviewEventName is deprecated.  Use 'DetectEventName' instead."),this.parent.dispatchEvent(e)}}k.InitializeEventName="initialize",k.BeforeOpenEventName="beforeOpen",k.OpenEventName="open",k.DetectEventName="detect",k.BeforeCaptureEventName="beforeCapture",k.CaptureEventName="capture",k.CloseEventName="close",k.FailureEventName="failure",k.DetectorInitializeEventName="initialize",k.PreviewEventName="preview",k.RetakeEventName="retake",function(e){e.NotInitialized="NOT_INITIALIZED",e.FaceNotFound="FACE_NOT_FOUND",e.TooManyFaces="TOO_MANY_FACES",e.FaceAngleTooLarge="FACE_ANGLE_TOO_LARGE",e.ProbabilityTooSmall="PROBABILITY_TOO_SMALL",e.FaceTooSmall="FACE_TOO_SMALL",e.FaceCloseToBorder="FACE_CLOSE_TO_BORDER"}(f||(f={}));let _=class extends a{constructor(){super(...arguments),this.isEnding=!1,this.liveCameraRef=d(),this.eventDispatcher=new k(this),this.lastDetectionState=null,this.isFlashing=!1,this.environment="production",this.isOpen=!1,this.hints=void 0,this.detectionState=f.FaceNotFound,this.isInPreview=!1,this.detectionText=e=>{var t,i,o,a,n,s,r,l,d,c,h,v,u,p;switch(e){case f.NotInitialized:return null!==(i=null===(t=this.hints)||void 0===t?void 0:t.notInitializedHint)&&void 0!==i?i:"Tap to capture";case f.FaceNotFound:return null!==(a=null===(o=this.hints)||void 0===o?void 0:o.faceNotFoundHint)&&void 0!==a?a:"Face not found";case f.TooManyFaces:return null!==(s=null===(n=this.hints)||void 0===n?void 0:n.tooManyFacesHint)&&void 0!==s?s:"Too many faces";case f.FaceAngleTooLarge:return null!==(l=null===(r=this.hints)||void 0===r?void 0:r.faceAngleTooLargeHint)&&void 0!==l?l:"Face not straight on";case f.ProbabilityTooSmall:return null!==(c=null===(d=this.hints)||void 0===d?void 0:d.probabilityTooSmallHint)&&void 0!==c?c:"Probability too small";case f.FaceTooSmall:return null!==(v=null===(h=this.hints)||void 0===h?void 0:h.faceTooSmallHint)&&void 0!==v?v:"Face too far";case f.FaceCloseToBorder:return null!==(p=null===(u=this.hints)||void 0===u?void 0:u.faceCloseToBorderHint)&&void 0!==p?p:"Face too close";default:return""}}}isMobileDevice(){return/Android|iPhone|iPad/i.test(navigator.userAgent)}connectedCallback(){super.connectedCallback(),this.loadLibrary().then((()=>console.log("Library loaded successfully."))).catch((e=>console.error("Error loading library",e))),window.addEventListener("beforeunload",this._handleBeforeUnload.bind(this)),document.addEventListener("visibilitychange",this._handleVisibilityChange.bind(this)),window.addEventListener("focus",this._handleFocus.bind(this)),window.addEventListener("blur",this._handleBlur.bind(this))}_handleBeforeUnload(e){e.preventDefault()}_handleVisibilityChange(){document.hidden?console.log("Page is hidden"):console.log("Page is visible")}_handleFocus(){console.log("Window has focus")}_handleBlur(){console.log("Window lost focus")}async loadLibrary(){try{const t=await(e=this.environment,"development"===e?import("idlive-face-capture-web-development"):import("idlive-face-capture-web"));console.log(`${this.environment} library loaded`,t)}catch(e){console.log(`Failed to load the ${this.environment} library`,e)}var e}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("beforeunload",this._handleBeforeUnload.bind(this)),document.removeEventListener("visibilitychange",this._handleVisibilityChange.bind(this)),window.removeEventListener("focus",this._handleFocus.bind(this)),window.removeEventListener("blur",this._handleBlur.bind(this))}_handleOutsideClick(e){var t;const i=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("live-face-camera");i&&!i.contains(e.target)&&(e.preventDefault(),console.log("Clicked outside the component"))}updated(e){var t,i;e.has("isOpen")&&(p()?this.isOpen?null===(t=this.liveCameraRef.value)||void 0===t||t.dispatchEvent(new Event("open")):null===(i=this.liveCameraRef.value)||void 0===i||i.dispatchEvent(new Event("close")):this.isOpen)}_onInitialized(e){e.stopPropagation(),console.log("Initialized"),this.eventDispatcher.dispatchInitialized()}_onBeforeOpened(e){e.stopPropagation(),this.eventDispatcher.dispatchBeforeOpened()}_onOpened(e){this.isEnding=!1;var t,i,o,a,n;const s=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".oval"),r=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector(".initializer"),l=null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector(".sidepanel"),d=null===(a=this.shadowRoot)||void 0===a?void 0:a.querySelector(".liveface"),c=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector(".hint");null==s||s.classList.remove("error"),null==l||l.classList.remove("mobile"),null==d||d.classList.remove("mobile"),null==s||s.classList.remove("mobile"),this.isMobileDevice()?(console.log("Detected mobile device"),null==l||l.classList.add("mobile"),null==d||d.classList.add("mobile"),null==s||s.classList.add("mobile"),null==c||c.classList.add("mobile"),null==r||r.classList.add("mobile")):console.log("Detected desktop device"),e.stopPropagation(),this.liveCameraRef.value.openCamera(),this.eventDispatcher.dispatchOpened(),setTimeout((()=>{var e,t,i,o;const a=null===(t=null===(e=this.liveCameraRef.value)||void 0===e?void 0:e.shadowRoot)||void 0===t?void 0:t.querySelector("video");a&&(a.setAttribute("aria-hidden","true"),a.setAttribute("tabindex","-1"));const n=null===(o=null===(i=this.liveCameraRef.value)||void 0===i?void 0:i.shadowRoot)||void 0===o?void 0:o.querySelector("canvas");n&&(n.setAttribute("inert",""),n.setAttribute("tabindex","-1"),n.setAttribute("role","none"))}),100)}_onDetection(e){var t;e.stopPropagation();const{errors:i}=e.detail[0],o=i[0];void 0!==o&&(this.detectionState=o);const a=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".oval"),n=[f.NotInitialized,f.FaceNotFound,f.TooManyFaces,f.FaceAngleTooLarge,f.ProbabilityTooSmall,f.FaceTooSmall,f.FaceCloseToBorder];this.detectionState!==this.lastDetectionState&&(n.includes(this.detectionState)&&(this.isFlashing||(this.isFlashing=!0,null==a||a.classList.add("error"),setTimeout((()=>{this.isFlashing=!1}),300))),this.lastDetectionState=this.detectionState),this.eventDispatcher.dispatchDetected(i)}_onBeforeCaptured(e){e.stopPropagation(),this.eventDispatcher.dispatchBeforeCaptured()}_onCaptured(e){this.isEnding=!0;var t,i,o;const a=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".oval"),n=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector(".capturedModal"),s=null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector(".hint");null==a||a.classList.remove("error"),null==a||a.classList.add("done"),null==s||s.classList.add("done"),null==n||n.classList.add("done"),setTimeout((()=>{e.stopPropagation(),this.isInPreview=!1,this.isOpen=!1;const t=e.detail[0].photo;m(t).then((t=>{this.eventDispatcher.dispatchCapture(t.split("base64,")[1],e.detail[0].encryptedFile)})),null==a||a.classList.remove("done"),null==n||n.classList.remove("done"),null==s||s.classList.remove("done")}),1e3)}_onClosed(e){e.stopPropagation(),this.isOpen=!1;if(!this.isEnding){this.eventDispatcher.dispatchClosed()}}_onFailure(e){this.isEnding=!0,e.stopPropagation(),this.isOpen=!1,"error"===e.type?this.eventDispatcher.dispatchError(v(e.detail.error)):this.eventDispatcher.dispatchError(u(e.detail.error))}_onPreview(e){e.stopPropagation(),this.isInPreview=!0,this.eventDispatcher.dispatchPreview()}_onRetake(e){e.stopPropagation(),this.isInPreview=!1,this.eventDispatcher.dispatchRetake()}handleKeydown(e){"Enter"===e.key&&e.target.click()}_closeCamera(e){e.stopPropagation(),this.liveCameraRef.value.closeCamera(),this.isInPreview=!1,this.isOpen=!1}liveCamera(){return n`
      <div
        role="button"
        aria-label="Go back"
        tabindex="0"
        class="backButton"
        @keydown=${this.handleKeydown}
        @click=${this._closeCamera}
        style="cursor: pointer;"
      >
      <svg aria-hidden="true" focusable="false" tabindex="-1" width="2rem" height="2rem"  viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15 18L9 12L15 6" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>

      <div class="sidepanel" ><div
        id="face-camera-detection-text"
        class="hint2"
        ?hidden=${!this.isOpen||this.isInPreview}
      >
        <svg aria-hidden="true" focusable="false" tabindex="-1" width="3vw" height="3vw" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1C12.3788 1 12.725 1.214 12.8944 1.55279L22.8944 21.5528C23.0494 21.8628 23.0329 22.2309 22.8507 22.5257C22.6684 22.8205 22.3466 23 22 23H2C1.65342 23 1.33156 22.8205 1.14935 22.5257C0.967144 22.2309 0.95058 21.8628 1.10557 21.5528L11.1056 1.55279C11.275 1.214 11.6212 1 12 1ZM20.382 21L12 4.23607L3.61804 21H20.382ZM12 9C12.5523 9 13 9.44771 13 10V14C13 14.5523 12.5523 15 12 15C11.4477 15 11 14.5523 11 14V10C11 9.44771 11.4477 9 12 9ZM12 19C12.5523 19 13 18.5523 13 18C13 17.4477 12.5523 17 12 17C11.4477 17 11 17.4477 11 18C11 18.5523 11.4477 19 12 19Z" fill="#F88618"/>
        </svg>
${this.detectionText(this.detectionState)}
      </div></div>

      <div class="oval">
        <div class="initializer" >Place your face within the oval</div>

        <div
          id="face-camera-detection-text"
          class="hint"
          ?hidden=${!this.isOpen||this.isInPreview}
          role="status"
          aria-live="assertive"
        >
          <svg 
            aria-hidden="true"
            focusable="false"
            class="warningIcon"  
            viewBox="0 0 24 24" fill="none" 
            xmlns="http://www.w3.org/2000/svg"
          >
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1C12.3788 1 12.725 1.214 12.8944 1.55279L22.8944 21.5528C23.0494 21.8628 23.0329 22.2309 22.8507 22.5257C22.6684 22.8205 22.3466 23 22 23H2C1.65342 23 1.33156 22.8205 1.14935 22.5257C0.967144 22.2309 0.95058 21.8628 1.10557 21.5528L11.1056 1.55279C11.275 1.214 11.6212 1 12 1ZM20.382 21L12 4.23607L3.61804 21H20.382ZM12 9C12.5523 9 13 9.44771 13 10V14C13 14.5523 12.5523 15 12 15C11.4477 15 11 14.5523 11 14V10C11 9.44771 11.4477 9 12 9ZM12 19C12.5523 19 13 18.5523 13 18C13 17.4477 12.5523 17 12 17C11.4477 17 11 17.4477 11 18C11 18.5523 11.4477 19 12 19Z" fill="#F88618"/>
          </svg>
  ${this.detectionText(this.detectionState)}
        </div>
      </div>

      <div class="capturedModal">
        <svg aria-hidden="true" focusable="false" tabindex="-1" width="1.5vw" height="1.5vw" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_6455_142)">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 12C2.5 6.47715 6.97715 2 12.5 2C18.0228 2 22.5 6.47715 22.5 12C22.5 17.5228 18.0228 22 12.5 22C6.97715 22 2.5 17.5228 2.5 12ZM12.5 0C5.87258 0 0.5 5.37258 0.5 12C0.5 18.6274 5.87258 24 12.5 24C19.1274 24 24.5 18.6274 24.5 12C24.5 5.37258 19.1274 0 12.5 0ZM17.2071 9.70711C17.5976 9.31658 17.5976 8.68342 17.2071 8.29289C16.8166 7.90237 16.1834 7.90237 15.7929 8.29289L10.5 13.5858L9.20711 12.2929C8.81658 11.9024 8.18342 11.9024 7.79289 12.2929C7.40237 12.6834 7.40237 13.3166 7.79289 13.7071L9.79289 15.7071C10.1834 16.0976 10.8166 16.0976 11.2071 15.7071L17.2071 9.70711Z" fill="#78D278"/>
          </g>
          <defs>
            <clipPath id="clip0_6455_142">
              <rect width="80" height="80" fill="white" transform="translate(0.5)"/>
            </clipPath>
          </defs>
        </svg>
        Photo captured
      </div>

      <div class="liveface">
        <idlive-face-capture
        mask_hidden
        ${c(this.liveCameraRef)}
        @initialize=${this._onInitialized}
        @beforeOpen=${this._onBeforeOpened}
        @open=${this._onOpened}
        @detection=${this._onDetection}
        @beforeCapture=${this._onBeforeCaptured}
        @capture=${this._onCaptured}
        @close=${this._onClosed}
        @error=${this._onFailure}

        @makePhoto=${this._onPreview}
        @retakePhoto=${this._onRetake}
      >
      </idlive-face-capture>
      </div>
    `}render(){return p()?this.liveCamera():n``}};_.InitializeEventName=k.InitializeEventName,_.BeforeOpenEventName=k.BeforeOpenEventName,_.OpenEventName=k.OpenEventName,_.DetectEventName=k.DetectEventName,_.BeforeCaptureEventName=k.BeforeCaptureEventName,_.CaptureEventName=k.CaptureEventName,_.CloseEventName=k.CloseEventName,_.FailureEventName=k.FailureEventName,_.DetectorInitializeEventName=k.DetectorInitializeEventName,_.PreviewEventName=k.PreviewEventName,_.RetakeEventName=k.RetakeEventName,_.styles=o`

    :host {
          display: flex;

      width: 100%;
      height: 100%;
    }
      .warningIcon{
      width: 1.5vw;
      height: 1.5vw;
    }
  .hint, .initializer {
  white-space: nowrap;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  font-family: 'Inter';
  color: rgb(255, 255, 255);
  text-align: center;
  font-weight: normal;
}

.hint {
  bottom: -10vh; /* Adjust this value as needed */
  font-size: 1.5vw;
}
  .hint.done {
  display: none;
}

.initializer {
  top: -10vh; /* Adjust this value as needed */
  font-size: 1.5vw;
}
      .hint2 {
      justify-content: center;
      align-items: center;

      z-index: 101;
      font-family: 'Inter';

      font-size: 2vw;

      color: rgb(255, 255, 255);
      bottom: 5vh;
      text-align: center;
      font-weight: normal;
    }

    .oval {
      z-index: 100;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      position: absolute;
      width: 50vh;
      height: 70%;
      border: 1.1vw solid white;
      border-radius: 70vw;
      background: transparent;
      box-shadow: 0 0 0 9999px rgba(0, 0, 10, 0.6);
      transition: .5s;
    }
     .capturedModal{

      font-size: 1.5vw;
      display:none;
      text-align: center;
      justify-content: center;
      align-items: center;
      color:white;
      z-index: 100;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      position: absolute;
      width: 20vw;
      height: 4vw;
      border-radius: 8px;
      background: rgba(0,0,10,0.6);
      transition: 1s;
      }
      .capturedModal.done {
      display: flex;

    }
    /* Adjust for portrait mode */
    @media (orientation: portrait) {
      .oval {
        width: 70vw;
        height: 100vw;
        border-radius: 140vw;
      }
      .hint {
        font-size: 100%;
        bottom: -8vh;
          font-size: 2vh;

      }
      .initializer {
        top: -8vh; /* Adjust this value as needed */

      font-size: 2vh;
      white-space: nowrap;
      }
      .warningIcon{
        width:6vw;
        height: 6vw;

      }
      .capturedModal{
        width: 40vw;
        height: 8vw;
        font-size: 3vw;
      }
      .capturedModal svg{
        width: 3vw;
        height: 3vw;
      }
    }
    svg {
      vertical-align: middle;
      margin-bottom: .5vw;
    }
    .liveface{
      height:100%;
      width:100%;
      position:absolute;
      top:0
    }

    .oval.error {
      transition: 1s;
      border-color: orange;
    }
    .sidepanel{
      z-index: 103;
      display: none;
      position: absolute;
      background: rgba(0,0,10,1);
      height: 100%;
      width: 40%;
      right: 0%;
    }
    .oval.done {
      border-color: rgb(144, 238, 144);
    }

    @media (orientation: landscape) {
      .oval.mobile {
      left: 23%;
      height: 80%;

      transform: translate(-20%, -50%);    }
      .sidepanel.mobile{
        display: flex;
        top: 0;
        text-align: center;
        justify-content: center;
        align-items: center;
      }
      .liveface.mobile{
        width:80%;
        transform: translate(-25%, 0);

      }
      .hint.mobile{
       display: none;
      }
      .initializer.mobile{
        display: none;
      }
    }
    .capturedModal svg {
      margin-right: 8px;
    }
    .backButton{
    position:absolute;
    z-index:101;
    top:4vh;

    left:5vw;
    }
  `,i([s({type:String})],_.prototype,"environment",void 0),i([s({type:Boolean})],_.prototype,"isOpen",void 0),i([s({type:Object})],_.prototype,"hints",void 0),i([r()],_.prototype,"detectionState",void 0),i([r()],_.prototype,"isInPreview",void 0),_=i([l("live-face-camera")],_);export{_ as LiveFaceCamera,v as PermissionNotGrantedError,u as UnexpectedError};
//# sourceMappingURL=index.js.map
